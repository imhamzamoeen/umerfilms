# Story 4.7: Experience Timeline Component

## Status
Draft

## Story
**As a** visitor,
**I want** to see a timeline of experience and work history,
**so that** I can learn about the professional background.

## Acceptance Criteria

1. Timeline component with vertical layout created
2. Items display in accordion/slide-open style
3. Each entry shows year/date range, position, company, description
4. Purple-pink accent line connects timeline items vertically
5. Clicking item expands/collapses content
6. Smooth accordion animation
7. Timeline data structure created in `data/timeline.ts`
8. Icons or markers indicate each timeline point
9. Responsive layout on mobile (simplified timeline)
10. Keyboard accessible (Enter/Space to expand)
11. Component tests verify accordion functionality
12. ARIA attributes for expandable sections

## Tasks / Subtasks

- [ ] Task 1: Create Timeline Data Structure (AC: 3, 7)
  - [ ] Create `src/data/timeline.ts` file
  - [ ] Define TimelineEntry interface (year, position, company, description)
  - [ ] Add 5-8 timeline entries (experience, education, awards)
  - [ ] Export timeline array
  - [ ] Add TypeScript types

- [ ] Task 2: Create TimelineItem Component (AC: 2, 3, 5, 8)
  - [ ] Create `src/components/home/TimelineItem.tsx`
  - [ ] Implement accordion toggle (useState)
  - [ ] Display year, position, company
  - [ ] Show/hide description on click
  - [ ] Add circular marker/icon
  - [ ] Style with purple-pink accent

- [ ] Task 3: Create Timeline Section Component (AC: 1, 4)
  - [ ] Create `src/components/home/Timeline.tsx`
  - [ ] Add section heading ("Experience" or "Journey")
  - [ ] Render vertical timeline layout
  - [ ] Add purple-pink connecting line (border-left or pseudo-element)
  - [ ] Map over timeline data

- [ ] Task 4: Implement Accordion Animation (AC: 6)
  - [ ] Add smooth height transition (max-height or Framer Motion)
  - [ ] Animate content fade-in (opacity)
  - [ ] Duration: 0.3-0.4s
  - [ ] Easing: ease-out
  - [ ] Rotate chevron icon on expand

- [ ] Task 5: Style Timeline Markers (AC: 8)
  - [ ] Create circular markers (1-1.5rem diameter)
  - [ ] Apply purple-pink gradient background
  - [ ] Position on vertical line
  - [ ] Add white border around marker
  - [ ] Optionally add icons inside markers

- [ ] Task 6: Responsive Layout (AC: 9)
  - [ ] Desktop: Full timeline with line on left
  - [ ] Mobile: Simplified vertical stack
  - [ ] Adjust marker positioning for mobile
  - [ ] Test on all breakpoints
  - [ ] Ensure content doesn't overflow

- [ ] Task 7: Keyboard Accessibility (AC: 10)
  - [ ] Make timeline items focusable (tabIndex={0})
  - [ ] Add Enter/Space key listeners to toggle
  - [ ] Indicate focus state with outline
  - [ ] Test keyboard navigation
  - [ ] Ensure logical tab order

- [ ] Task 8: ARIA Attributes (AC: 12)
  - [ ] Add aria-expanded to timeline items
  - [ ] Add aria-controls linking button to content
  - [ ] Add role="button" to clickable headers
  - [ ] Add aria-label for screen readers
  - [ ] Test with screen readers

- [ ] Task 9: Component Testing (AC: 11)
  - [ ] Create `Timeline.test.tsx` and `TimelineItem.test.tsx`
  - [ ] Test accordion expand/collapse
  - [ ] Test keyboard interactions
  - [ ] Test all timeline entries render
  - [ ] Test ARIA attributes

- [ ] Task 10: Integration with Homepage
  - [ ] Import Timeline component in `src/app/page.tsx`
  - [ ] Position after Services section
  - [ ] Add section padding
  - [ ] Verify layout flow

## Dev Notes

### Timeline Specification
[Source: idea.md - Layout & grids section, changes.md section 7]

**From idea.md:**
- Vertical timeline layout
- Items slide open/accordion style
- Each entry: year/date, position, company, description
- Purple-pink accent line connecting items

**Timeline Features:**
- Chronological order (newest first)
- Expandable/collapsible entries
- Visual connection line
- Circular markers with gradient

### Timeline Data Structure
[Source: docs/architecture/unified-project-structure.md]

**File:** `src/data/timeline.ts`

```typescript
export interface TimelineEntry {
  id: string;
  year: string;
  position: string;
  company: string;
  description: string;
  type: 'work' | 'education' | 'award';
}

export const timeline: TimelineEntry[] = [
  {
    id: 'current',
    year: '2023 - Present',
    position: 'Lead Cinematographer',
    company: 'UmerFilms',
    description:
      'Leading high-end commercial and documentary productions with a focus on cinematic storytelling and visual excellence.',
    type: 'work',
  },
  {
    id: 'director-2020',
    year: '2020 - 2023',
    position: 'Director of Photography',
    company: 'Creative Vision Studios',
    description:
      'Directed photography for award-winning commercials and music videos, collaborating with international brands.',
    type: 'work',
  },
  {
    id: 'award-2022',
    year: '2022',
    position: 'Best Cinematography Award',
    company: 'International Film Festival',
    description:
      'Recognized for outstanding cinematography in documentary filmmaking.',
    type: 'award',
  },
  {
    id: 'cinematographer-2018',
    year: '2018 - 2020',
    position: 'Freelance Cinematographer',
    company: 'Various Productions',
    description:
      'Worked on diverse projects including commercials, documentaries, and narrative shorts across multiple countries.',
    type: 'work',
  },
  {
    id: 'education-2018',
    year: '2015 - 2018',
    position: 'Film & Media Production',
    company: 'University of Arts',
    description:
      'Bachelor of Arts in Film Production with specialization in cinematography and visual storytelling.',
    type: 'education',
  },
];
```

### TimelineItem Component Implementation
[Source: idea.md - Interactive components section]

**File:** `src/components/home/TimelineItem.tsx`

```tsx
'use client';

import { useState } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { BsChevronDown } from 'react-icons/bs';
import { TimelineEntry } from '@/data/timeline';

interface TimelineItemProps {
  entry: TimelineEntry;
  index: number;
}

export default function TimelineItem({ entry, index }: TimelineItemProps) {
  const [isExpanded, setIsExpanded] = useState(index === 0); // First item open by default

  const toggleExpand = () => setIsExpanded(!isExpanded);

  const handleKeyPress = (e: React.KeyboardEvent) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      toggleExpand();
    }
  };

  return (
    <div className="timeline-item relative pl-12">
      {/* Timeline Marker */}
      <div className="timeline-marker absolute left-0 top-2 h-6 w-6 rounded-full border-4 border-black bg-gradient-to-br from-[#450E93] to-[#D5007F]" />

      {/* Timeline Content */}
      <div className="timeline-content">
        {/* Header (Always Visible) */}
        <div
          className="cursor-pointer py-4"
          onClick={toggleExpand}
          onKeyPress={handleKeyPress}
          role="button"
          tabIndex={0}
          aria-expanded={isExpanded}
          aria-controls={`timeline-${entry.id}`}
        >
          <div className="flex items-center justify-between">
            <div>
              <p className="text-sm uppercase tracking-wider text-gray-400">
                {entry.year}
              </p>
              <h3 className="mt-1 text-xl font-bold text-white">
                {entry.position}
              </h3>
              <p className="mt-1 text-gray-300">{entry.company}</p>
            </div>
            <motion.div
              animate={{ rotate: isExpanded ? 180 : 0 }}
              transition={{ duration: 0.3 }}
            >
              <BsChevronDown className="text-2xl text-white" />
            </motion.div>
          </div>
        </div>

        {/* Description (Expandable) */}
        <AnimatePresence initial={false}>
          {isExpanded && (
            <motion.div
              id={`timeline-${entry.id}`}
              initial={{ height: 0, opacity: 0 }}
              animate={{ height: 'auto', opacity: 1 }}
              exit={{ height: 0, opacity: 0 }}
              transition={{ duration: 0.4, ease: 'easeOut' }}
              className="overflow-hidden"
            >
              <p className="pb-6 text-gray-300 leading-relaxed">
                {entry.description}
              </p>
            </motion.div>
          )}
        </AnimatePresence>
      </div>
    </div>
  );
}
```

### Timeline Section Component
[Source: docs/architecture/unified-project-structure.md]

**File:** `src/components/home/Timeline.tsx`

```tsx
import { timeline } from '@/data/timeline';
import TimelineItem from './TimelineItem';

export default function Timeline() {
  return (
    <section className="timeline-section bg-black py-24">
      <div className="container mx-auto px-6">
        {/* Section Header */}
        <div className="mb-16 text-center">
          <p className="section-label mb-4 text-sm uppercase tracking-widest text-gray-400">
            Experience
          </p>
          <h2 className="text-5xl font-bold text-white md:text-6xl">
            My Journey
          </h2>
        </div>

        {/* Timeline */}
        <div className="timeline-wrapper mx-auto max-w-3xl">
          <div className="timeline-line relative border-l-2 border-gray-700 pl-2">
            {timeline.map((entry, index) => (
              <TimelineItem key={entry.id} entry={entry} index={index} />
            ))}
          </div>
        </div>
      </div>
    </section>
  );
}
```

**Timeline Line Styling:**

```css
.timeline-line {
  position: relative;
  border-left: 2px solid;
  border-image: linear-gradient(
    to bottom,
    rgba(69, 14, 147, 0.5) 0%,
    rgba(213, 0, 127, 0.5) 100%
  ) 1;
}

/* Alternative with pseudo-element */
.timeline-line::before {
  content: '';
  position: absolute;
  left: -2px;
  top: 0;
  bottom: 0;
  width: 2px;
  background: linear-gradient(
    to bottom,
    #450e93 0%,
    #d5007f 100%
  );
}
```

### Accordion Animation Details
[Source: idea.md - Animations section]

**Animation Properties:**
- Height: 0 → auto (expand), auto → 0 (collapse)
- Opacity: 0 → 1 (fade in), 1 → 0 (fade out)
- Duration: 0.4s
- Easing: ease-out

**Framer Motion Implementation:**
```tsx
<motion.div
  initial={{ height: 0, opacity: 0 }}
  animate={{ height: 'auto', opacity: 1 }}
  exit={{ height: 0, opacity: 0 }}
  transition={{ duration: 0.4, ease: 'easeOut' }}
>
  {content}
</motion.div>
```

### Timeline Marker Styling
[Source: idea.md - Icons & imagery section]

**Marker Design:**
- Size: 1.5rem (24px) diameter
- Background: Purple-pink gradient
- Border: 4px white (or black for contrast with line)
- Position: On vertical line

**CSS Implementation:**
```css
.timeline-marker {
  width: 1.5rem;
  height: 1.5rem;
  border-radius: 50%;
  background: linear-gradient(135deg, #450e93 0%, #d5007f 100%);
  border: 4px solid #000000;
  position: absolute;
  left: -0.75rem; /* Half width to center on line */
  top: 0.5rem;
}
```

### Responsive Behavior
[Source: idea.md - Layout & grids section]

**Desktop (>768px):**
- Vertical timeline with line on left
- Markers positioned on line
- Content to right of line

**Mobile (<768px):**
- Simplified timeline
- Smaller markers
- Reduced spacing
- Single column layout

```css
/* Mobile adjustments */
@media (max-width: 768px) {
  .timeline-item {
    padding-left: 2rem;
  }

  .timeline-marker {
    width: 1rem;
    height: 1rem;
    left: -0.5rem;
  }

  .timeline-content h3 {
    font-size: 1.25rem;
  }
}
```

### Keyboard Accessibility
[Source: idea.md - Semantic & accessible section]

**Keyboard Support:**
- Tab: Navigate between timeline items
- Enter/Space: Expand/collapse item
- Shift+Tab: Navigate backwards

**Implementation:**
```tsx
const handleKeyPress = (e: React.KeyboardEvent) => {
  if (e.key === 'Enter' || e.key === ' ') {
    e.preventDefault();
    toggleExpand();
  }
};

<div
  role="button"
  tabIndex={0}
  onKeyPress={handleKeyPress}
  onClick={toggleExpand}
>
```

### ARIA Attributes
[Source: idea.md - Semantic & accessible section]

**Required ARIA:**
- `aria-expanded`: Indicates expanded state (true/false)
- `aria-controls`: Links button to controlled content (element ID)
- `role="button"`: Indicates clickable header
- `aria-label`: Descriptive label for screen readers

**Implementation:**
```tsx
<div
  role="button"
  aria-expanded={isExpanded}
  aria-controls={`timeline-${entry.id}`}
  aria-label={`${entry.position} at ${entry.company}, ${entry.year}`}
>
```

### Component Testing
[Source: docs/architecture/testing-strategy.md]

**Test File:** `src/components/home/Timeline.test.tsx`

```typescript
import { render, screen, fireEvent } from '@testing-library/react';
import { describe, it, expect } from 'vitest';
import Timeline from './Timeline';
import { timeline } from '@/data/timeline';

describe('Timeline Section', () => {
  it('renders all timeline entries', () => {
    render(<Timeline />);

    timeline.forEach((entry) => {
      expect(screen.getByText(entry.position)).toBeInTheDocument();
      expect(screen.getByText(entry.company)).toBeInTheDocument();
    });
  });

  it('expands item on click', () => {
    render(<Timeline />);

    const firstItem = screen.getByText(timeline[0].position).closest('[role="button"]');
    fireEvent.click(firstItem!);

    expect(screen.getByText(timeline[0].description)).toBeVisible();
  });

  it('collapses item on second click', () => {
    render(<Timeline />);

    const firstItem = screen.getByText(timeline[0].position).closest('[role="button"]');

    fireEvent.click(firstItem!);
    expect(screen.getByText(timeline[0].description)).toBeVisible();

    fireEvent.click(firstItem!);
    expect(screen.queryByText(timeline[0].description)).not.toBeVisible();
  });

  it('expands on Enter key', () => {
    render(<Timeline />);

    const firstItem = screen.getByText(timeline[0].position).closest('[role="button"]');
    fireEvent.keyPress(firstItem!, { key: 'Enter', code: 'Enter' });

    expect(screen.getByText(timeline[0].description)).toBeVisible();
  });

  it('has proper ARIA attributes', () => {
    render(<Timeline />);

    const firstItem = screen.getByText(timeline[0].position).closest('[role="button"]');

    expect(firstItem).toHaveAttribute('aria-expanded');
    expect(firstItem).toHaveAttribute('aria-controls');
  });
});
```

### Dependencies
[Source: Epic 4 definition]

**Story Dependencies:**
- Depends on Story 4.1 (color palette)
- Depends on Story 4.6 (services section) - similar styling
- Should precede Story 4.8 (portfolio slider)

**Package Dependencies:**
```bash
npm install framer-motion       # Already installed for animations
npm install react-icons         # Already installed for icons
```

### Constraints
- **Accessibility:** Full keyboard support, ARIA attributes
- **Performance:** Smooth accordion animations
- **Responsive:** Works on all screen sizes
- **Semantic HTML:** Proper heading hierarchy

### Visual Design
[Source: idea.md - Layout & grids section]

**Timeline Visual:**
- Vertical purple-pink gradient line on left
- Circular markers with gradient backgrounds
- Dark text areas
- Expandable content sections
- Chevron icons indicate expand/collapse state

### Implementation Order
1. ✅ Create timeline data structure
2. ✅ Create TimelineItem component
3. ✅ Create Timeline section component
4. ✅ Implement accordion functionality
5. ✅ Add purple-pink vertical line
6. ✅ Style timeline markers
7. ✅ Add keyboard accessibility
8. ✅ Write component tests
9. ✅ Integrate with homepage

## Testing

[Source: docs/architecture/testing-strategy.md]

**Test Types:**
1. **Component Tests:** Accordion toggle, keyboard interaction
2. **Accessibility Tests:** ARIA attributes, keyboard navigation
3. **Visual Tests:** Animation smoothness, marker positioning

**Test Commands:**
```bash
npm test                     # Run all tests
npm test Timeline.test       # Test timeline section
```

**Expected Results:**
- All timeline entries render
- Accordion expand/collapse works
- Keyboard navigation functional
- Accessible to screen readers

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-12-14 | 1.0 | Initial story draft | Claude |

## Dev Agent Record

### Agent Model Used
_To be filled by dev agent_

### Debug Log References
_To be filled by dev agent_

### Completion Notes List
_To be filled by dev agent_

### File List
_To be filled by dev agent_

## QA Results
_To be filled by QA agent after implementation_
